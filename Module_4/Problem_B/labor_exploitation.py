def calculate_minimum_fine(cases):
    results = []
    
    for case in cases:
        num_jobs = case[0]
        jobs = case[1]

        jobs.sort(key=lambda x: (-x[1] / x[0]))

        total_time = 0
        total_fine = 0

        for i, (time, fine) in enumerate(jobs):
            total_time += time
            if i == 0:
                total_fine = 0
            else:
                total_fine += fine * (total_time - time)
        results.append(total_fine)
    
    return results

num_cases = int(input())
cases = []

for _ in range(num_cases):
    num_jobs = int(input())
    jobs = []
    for _ in range(num_jobs):
        time, fine = map(int, input().split())
        jobs.append((time, fine))
    cases.append((num_jobs, jobs))

results = calculate_minimum_fine(cases)

for result in results:
    print(result)